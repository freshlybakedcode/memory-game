"use strict";var numberOfPairs=5,pairData=[],container=document.querySelector(".container"),modal=document.querySelector(".modal"),delayBeforeTurnBack=1100,clickEnabled=!0,output="",modalOutput="",currentCard="",currentCardId="",firstCardSelected="",firstCardSelectedId="";"path"in Event.prototype||Object.defineProperty(Event.prototype,"path",{get:function(){for(var e=[],t=this.target;t;)e.push(t),t=t.parentElement;return-1===e.indexOf(window)&&-1===e.indexOf(document)&&e.push(document),-1===e.indexOf(window)&&e.push(window),e}});function setUpGameBoard(){(pairData=shuffle(pairData)).forEach(function(e){output+=' <span class="card" data-card-id='+e+'>\n                        <span class="card-front"></span>\n                        <span class="card-back">'+e+"</span>\n                    </span>"}),container.innerHTML=output}function setListeners(){document.querySelectorAll(".card-front").forEach(function(e){return e.addEventListener("click",handleCardSelected)})}function shuffle(e){for(var t,a,r=e.length;0!==r;)a=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[a],e[a]=t;return e}function handleCardSelected(e){clickEnabled&&(currentCard=e.path[1],currentCardId=currentCard.dataset.cardId,currentCard.classList.contains("face-up")||(currentCard.classList.add("face-up"),""===firstCardSelectedId?(firstCardSelectedId=currentCardId,firstCardSelected=currentCard):checkIfMatch()))}function checkIfMatch(){firstCardSelectedId===currentCardId?(currentCard.classList.add("matched"),firstCardSelected.classList.add("matched"),testForCompletion()):(clickEnabled=!1,setTimeout(function(){turnCardsBack(),clickEnabled=!0},delayBeforeTurnBack)),firstCardSelectedId=""}function turnCardsBack(){document.querySelectorAll(".face-up").forEach(function(e){e.classList.contains("matched")||e.classList.remove("face-up")})}function testForCompletion(){document.querySelectorAll(".matched").length===2*numberOfPairs&&(modal.style.display="block")}function handlePlayAgain(){modal.style.display="none",output="",modalOutput="",setUpGameBoard(),setListeners()}function firstTimeRun(){for(var e=0;e<numberOfPairs;e++)pairData.push(e,e);modalOutput+='<h1>Yay!</h1>\n                    <h2>You matched all the pairs!</h2>\n                    <span class="modal-button">Play again</span>',modal.innerHTML=modalOutput;document.querySelector(".modal-button").addEventListener("click",handlePlayAgain)}firstTimeRun(),setUpGameBoard(),setListeners();